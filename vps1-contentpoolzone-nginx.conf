server
{
    listen 80;
    listen [::]:80;
    server_name contentpoolzone.site www.contentpoolzone.site;

    #CERT-APPLY-CHECK--START
    # 用于SSL证书申请时的文件验证相关配置 -- 请勿删除
    include /www/server/panel/vhost/nginx/well-known/contentpoolzone.site.conf;
    #CERT-APPLY-CHECK--END

    #SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则
    #error_page 404/404.html;
    #SSL-END

    # 日志
    access_log  /www/wwwlogs/contentpoolzone.site.log;
    error_log  /www/wwwlogs/contentpoolzone.site.error.log;

    #一键申请SSL证书验证目录相关设置
    location ~ \.well-known{
        allow all;
    }

    # ========== 蜘蛛池反向代理配置 ==========

    # 主页面代理
    location / {
        # 提取请求路径
        set $request_slug $uri;
        if ($request_slug = /) {
            set $request_slug /index;
        }

        # 代理到Admin API
        proxy_pass https://adminseohub.xyz/api/p/contentpoolzone.site?slug=$request_slug;
        proxy_set_header Host adminseohub.xyz;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Original-Host $host;

        # 缓存配置
        proxy_cache_valid 200 30m;
        proxy_cache_bypass $http_pragma $http_authorization;
    }

    # Sitemap.xml
    location = /sitemap.xml {
        proxy_pass https://adminseohub.xyz/api/p/contentpoolzone.site?type=sitemap;
        proxy_set_header Host adminseohub.xyz;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        add_header Content-Type application/xml;
        proxy_cache_valid 200 1h;
    }

    # Robots.txt
    location = /robots.txt {
        proxy_pass https://adminseohub.xyz/api/p/contentpoolzone.site?type=robots;
        proxy_set_header Host adminseohub.xyz;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        add_header Content-Type text/plain;
        proxy_cache_valid 200 1d;
    }
}
